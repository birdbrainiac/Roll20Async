function isRunningOnServer(){return self.dispatchEvent==undefined}function setActiveCharacterId(charId){var oldAcid=getActiveCharacterId();var msg={id:"0",type:"setActiveCharacter",data:charId};if(isRunningOnServer()==false){var ev=new CustomEvent("message");ev.data=msg;self.dispatchEvent(ev)}else{self.onmessage({data:msg})}return oldAcid}var _sIn=setInterval;setInterval=function(callback,timeout){var acid=getActiveCharacterId();_sIn(function(){var prevAcid=setActiveCharacterId(acid);callback();setActiveCharacterId(prevAcid)},timeout)};var _sto=setTimeout;setTimeout=function(callback,timeout){var acid=getActiveCharacterId();_sto(function(){var prevAcid=setActiveCharacterId(acid);callback();setActiveCharacterId(prevAcid)},timeout)};function getAttrsAsync(props){var acid=getActiveCharacterId();var prevAcid=null;return new Promise((resolve,reject)=>{prevAcid=setActiveCharacterId(acid);try{getAttrs(props,values=>{resolve(values)})}catch{reject()}}).finally(()=>{setActiveCharacterId(prevAcid)})}function setAttrsAsync(propObj,options){var acid=getActiveCharacterId();var prevAcid=null;return new Promise((resolve,reject)=>{prevAcid=setActiveCharacterId(acid);try{setAttrs(propObj,options,values=>{resolve(values)})}catch{reject()}}).finally(()=>{setActiveCharacterId(prevAcid)})}function getSectionIDsAsync(sectionName){var acid=getActiveCharacterId();var prevAcid=null;return new Promise((resolve,reject)=>{prevAcid=setActiveCharacterId(acid);try{getSectionIDs(sectionName,values=>{resolve(values)})}catch{reject()}}).finally(()=>{setActiveCharacterId(prevAcid)})}